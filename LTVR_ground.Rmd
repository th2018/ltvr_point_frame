---
title: "Untitled"
author: "Tao Huang"
date: "9/13/2022"
output: html_document
---

```{r}
library("dplyr")
library("foreign")
```

```{r}
pf<-read.csv("/Users/owner/Downloads/ltvr_point_frame-main/export.csv")
pf$growthform_ct<-1


pf$Date<-as.POSIXct(pf$Date,format="%m/%d/%Y")
```

```{r}
pf_wbs1_2019_plot10<-pf[pf$Date>=as.POSIXct("01/01/2019",format="%m/%d/%Y") & pf$Date<as.POSIXct("01/01/2021",format="%m/%d/%Y") & pf$site=="wbs1" & pf$plot==10,]
pf_wbs1_2019_plot10
pf_wbs1_2019_plot10[pf_wbs1_2019_plot10$row==1,]
```


```{r}
pf<-pf[,c("site","Date","plot","growthform","growthform_ct")]

pf_count<-pf %>%    
  group_by(site,Date,plot,growthform) %>%
   summarise(count=n())

pf_plot<-pf %>%    
  group_by(site,Date,plot) %>%
   summarise(total_count=n())

pf_all<-merge(pf_count,pf_plot,by=c("site","Date","plot") )
pf_all$fraction<-pf_all$count/pf_all$total_count
pf_all
#pf %>% group_by(site) %>%tally()
```

```{r}
wbs<-pf_all[grepl("wbs", pf_all$site),]
table(wbs$site)
wbs$Date<- as.POSIXct(wbs$Date, format="%m/%d/%Y")
wbs
#save(wbs,file="wbs.Rdata")
```

```{r}
wbs1_2019_plot1<-wbs[wbs$Date>=as.POSIXct("01/01/2019",format="%m/%d/%Y") &wbs$Date<as.POSIXct("01/01/2021",format="%m/%d/%Y") & wbs$site=="wbs1" &wbs$plot==1,]
wbs1_2019_plot1
```

```{r}
rtk<-read.dbf("/Users/owner/Downloads/LTVR_LAI_RTK-corrected/LTVM_PointFrame_wDirection.dbf")
rtk_wbsveg1<-rtk[rtk$NWRC_Ref=="wbsveg1",]
rtk_wbsveg1
```

